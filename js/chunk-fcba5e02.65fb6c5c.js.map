{"version":3,"sources":["webpack:///./src/views/Station.vue","webpack:///./src/views/Station.vue?0ffc","webpack:///./src/views/Station.vue?cd81","webpack:///./src/methods/city.js","webpack:///./src/assets/images/station.png"],"names":["class","id","navbar-style","navbarStyle","tempStation","stations","station","key","stationID","href","stationName","stationAddress","tempBusRoutes","bus","RouteUID","City","RouteName","Zh_tw","DepartureStopNameZh","DestinationStopNameZh","CityName","type","data-bs-toggle","data-bs-target","aria-expanded","aria-controls","collapseShow","components","BreadcrumbBar","data","map","stationLayer","inject","watch","this","drawStation","getRouteData","methods","initialMap","zoomControl","setView","tileLayer","attribution","minZoom","maxZoom","subdomains","accessToken","addTo","navigator","geolocation","getCurrentPosition","position","longitude","coords","latitude","getNearbyStation","e","msg","code","dd","message","console","error","lat","lon","axios","method","url","headers","getAuthorizationHeader","then","res","cityStations","forEach","item","StationUID","substring","isCity","city","CityCode","indexOf","push","index","StationID","StationName","StationAddress","stationPosition","StationPosition","stops","Stops","concat","icon","iconUrl","iconSize","removeLayer","layerGroup","PositionLat","PositionLon","marker","title","opacity","stop","routeName","route","find","created","emitter","emit","mounted","__exports__","render","CityID","CountyID","Version","codeToCity","cityToCityName","module","exports"],"mappings":"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","file":"js/chunk-fcba5e02.65fb6c5c.js","sourcesContent":["<template>\r\n  <div class=\"station\">\r\n    <BreadcrumbBar :navbar-style=\"navbarStyle\"></BreadcrumbBar>\r\n    <div class=\"container-sm px-0 pt-sm-5\">\r\n      <div class=\"row\">\r\n        <div class=\"col-lg-6 mt-0 px-3 d-none d-sm-block\">\r\n          <div v-if=\"!tempStation\" class=\"station-container rounded-2 mb-sm-3\">\r\n            <div class=\"card-title mb-0 py-2 bg-primary d-none d-sm-block\">\r\n              <h1 class=\"fs-3 text-center text-white mb-0\">附近站點</h1>\r\n            </div>\r\n            <div class=\"card-body d-flex flex-column overflow-auto\">\r\n              <div\r\n                v-for=\"station in stations\"\r\n                :key=\"station.stationID\"\r\n                class=\"station-item\"\r\n              >\r\n                <h2 class=\"fs-3 text-danger mb-1\">\r\n                  <a\r\n                    href=\"#\"\r\n                    class=\"stretched-link\"\r\n                    @click.prevent=\"tempStation = station\"\r\n                    >{{ station.stationName }}</a\r\n                  >\r\n                </h2>\r\n                <span class=\"fs-7 text-muted\">{{\r\n                  station.stationAddress\r\n                }}</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div v-if=\"tempStation\" class=\"station-container rounded-2 mb-sm-3\">\r\n            <div class=\"d-flex justify-content-between p-3\">\r\n              <button class=\"btn icon-btn\" @click=\"tempStation = null\">\r\n                <div class=\"rounded-pill bg-info\">\r\n                  <i class=\"fas fas fas fa-long-arrow-alt-left\"></i>\r\n                </div>\r\n              </button>\r\n              <div class=\"text-end ms-3\">\r\n                <h1 class=\"fs-2 mb-1\">{{ tempStation.stationName }}</h1>\r\n                <span class=\"fs-6 text-muted\">{{\r\n                  tempStation.stationAddress\r\n                }}</span>\r\n              </div>\r\n            </div>\r\n            <div class=\"card-body d-flex flex-column overflow-auto\">\r\n              <div\r\n                v-for=\"bus in tempBusRoutes\"\r\n                :key=\"bus.RouteUID\"\r\n                class=\"route-item\"\r\n              >\r\n                <div class=\"row g-0\">\r\n                  <div class=\"col-9\">\r\n                    <h2 class=\"fs-3 text-danger mb-1\">\r\n                      <a\r\n                        :href=\"`#/driving-map/${bus.RouteUID}?city=${bus.City}&routeName=${bus.RouteName.Zh_tw}`\"\r\n                        class=\"stretched-link\"\r\n                        >{{ bus.RouteName.Zh_tw }}</a\r\n                      >\r\n                    </h2>\r\n                    <span class=\"fs-7 text-muted\"\r\n                      >{{ bus.DepartureStopNameZh\r\n                      }}<i class=\"fas fa-arrows-alt-h mx-1\"></i\r\n                      >{{ bus.DestinationStopNameZh }}</span\r\n                    >\r\n                  </div>\r\n                  <div class=\"col-3 text-end\">\r\n                    <span class=\"fs-7 px-2 py-1 border rounded-pill\">{{\r\n                      bus.CityName\r\n                    }}</span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"col-lg-6 mt-0\">\r\n          <div id=\"map\" class=\"bus-station-map mb-sm-3\"></div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"collapse-station-data d-sm-none\">\r\n      <button\r\n        class=\"btn w-100\"\r\n        type=\"button\"\r\n        data-bs-toggle=\"collapse\"\r\n        data-bs-target=\"#station-data\"\r\n        aria-expanded=\"false\"\r\n        aria-controls=\"station-data\"\r\n        @click=\"collapseShow = !collapseShow\"\r\n      >\r\n        <i v-if=\"collapseShow\" class=\"fas fa-caret-down\"></i>\r\n        <i v-else class=\"fas fa-caret-up\"></i>\r\n      </button>\r\n      <div id=\"station-data\" class=\"collapse\">\r\n        <div v-if=\"!tempStation\" class=\"station-container\">\r\n          <div class=\"card-title mb-0 py-2 bg-primary d-none d-md-block\">\r\n            <h1 class=\"fs-3 text-center text-white mb-0\">附近站點</h1>\r\n          </div>\r\n          <div class=\"card-body d-flex flex-column overflow-auto\">\r\n            <div\r\n              v-for=\"station in stations\"\r\n              :key=\"station.stationID\"\r\n              class=\"station-item\"\r\n            >\r\n              <h2 class=\"fs-3 text-danger mb-1\">\r\n                <a\r\n                  href=\"#\"\r\n                  class=\"stretched-link\"\r\n                  @click.prevent=\"tempStation = station\"\r\n                  >{{ station.stationName }}</a\r\n                >\r\n              </h2>\r\n              <span class=\"fs-7 text-muted\">{{ station.stationAddress }}</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div v-if=\"tempStation\" class=\"station-container\">\r\n          <div class=\"d-flex justify-content-between p-3\">\r\n            <button class=\"btn icon-btn\" @click=\"tempStation = null\">\r\n              <div class=\"rounded-pill bg-info\">\r\n                <i class=\"fas fas fas fa-long-arrow-alt-left\"></i>\r\n              </div>\r\n            </button>\r\n            <div class=\"text-end ms-3\">\r\n              <h1 class=\"fs-2 mb-1\">{{ tempStation.stationName }}</h1>\r\n              <span class=\"fs-6 text-muted\">{{\r\n                tempStation.stationAddress\r\n              }}</span>\r\n            </div>\r\n          </div>\r\n          <div class=\"card-body d-flex flex-column overflow-auto\">\r\n            <div\r\n              v-for=\"bus in tempBusRoutes\"\r\n              :key=\"bus.RouteUID\"\r\n              class=\"route-item\"\r\n            >\r\n              <div class=\"row g-0\">\r\n                <div class=\"col-9\">\r\n                  <h2 class=\"fs-3 text-danger mb-1\">\r\n                    <a\r\n                      :href=\"`#/driving-map/${bus.RouteUID}?city=${bus.City}&routeName=${bus.RouteName.Zh_tw}`\"\r\n                      class=\"stretched-link\"\r\n                      >{{ bus.RouteName.Zh_tw }}</a\r\n                    >\r\n                  </h2>\r\n                  <span class=\"fs-7 text-muted\"\r\n                    >{{ bus.DepartureStopNameZh\r\n                    }}<i class=\"fas fa-arrows-alt-h mx-1\"></i\r\n                    >{{ bus.DestinationStopNameZh }}</span\r\n                  >\r\n                </div>\r\n                <div class=\"col-3 text-end\">\r\n                  <span class=\"fs-7 px-2 py-1 border rounded-pill\">{{\r\n                    bus.CityName\r\n                  }}</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport BreadcrumbBar from '@/components/BreadcrumbBar.vue'\r\nimport L from 'leaflet'\r\nimport getAuthorizationHeader from '@/methods/getAuthorizationHeader'\r\nimport { city, codeToCity, cityToCityName } from '@/methods/city'\r\n\r\nexport default {\r\n  components: { BreadcrumbBar },\r\n  data () {\r\n    return {\r\n      navbarStyle: 'dark',\r\n      collapseShow: false,\r\n      map: {},\r\n      stations: [],\r\n      tempStation: null,\r\n      tempBusRoutes: [],\r\n      stationLayer: {}\r\n    }\r\n  },\r\n  inject: ['emitter'],\r\n  watch: {\r\n    tempStation () {\r\n      this.drawStation()\r\n      this.getRouteData()\r\n    }\r\n  },\r\n  methods: {\r\n    initialMap () {\r\n      this.map = L.map('map', { zoomControl: false }).setView([0, 0], 0)\r\n      L.tileLayer(\r\n        `https://{s}.tile.jawg.io/jawg-light/{z}/{x}/{y}{r}.png?access-token=${process.env.VUE_APP_JAWG_ACCESSTOKEN}`,\r\n        {\r\n          attribution:\r\n            '<a href=\"http://jawg.io\" title=\"Tiles Courtesy of Jawg Maps\" target=\"_blank\">&copy; <b>Jawg</b>Maps</a> &copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors',\r\n          minZoom: 0,\r\n          maxZoom: 22,\r\n          subdomains: 'abcd',\r\n          accessToken: process.env.VUE_APP_JAWG_ACCESSTOKEN\r\n        }\r\n      ).addTo(this.map)\r\n      if (navigator.geolocation) {\r\n        navigator.geolocation.getCurrentPosition(\r\n          (position) => {\r\n            const longitude = position.coords.longitude\r\n            const latitude = position.coords.latitude\r\n            this.map.setView([latitude, longitude], 16)\r\n            this.getNearbyStation(latitude, longitude)\r\n          },\r\n          // 錯誤訊息\r\n          function (e) {\r\n            const msg = e.code\r\n            const dd = e.message\r\n            console.error('msg', msg)\r\n            console.error('dd', dd)\r\n          }\r\n        )\r\n      }\r\n    },\r\n    getNearbyStation (lat, lon) {\r\n      this.axios({\r\n        method: 'get',\r\n        url: `https://ptx.transportdata.tw/MOTC/v2/Bus/Station/NearBy?$spatialFilter=nearby(${lat},${lon},300)\r\n&$format=JSON`,\r\n        headers: getAuthorizationHeader()\r\n      }).then((res) => {\r\n        const cityStations = []\r\n        res.data.forEach((item) => {\r\n          const code = item.StationUID.substring(0, 3)\r\n          const isCity = city.map((city) => city.CityCode).indexOf(code)\r\n          if (isCity !== -1) {\r\n            cityStations.push(item)\r\n          }\r\n        })\r\n        cityStations.forEach((item) => {\r\n          const index = this.stations\r\n            .map((item) => item.stationID)\r\n            .indexOf(item.StationID)\r\n          if (index === -1) {\r\n            this.stations.push({\r\n              stationID: item.StationID || '--',\r\n              stationName: item.StationName.Zh_tw || '--',\r\n              stationAddress: item.StationAddress || '--',\r\n              stationPosition: item.StationPosition || {},\r\n              stops: item.Stops\r\n            })\r\n          } else {\r\n            this.stations[index].stops = this.stations[index].stops.concat(\r\n              item.Stops\r\n            )\r\n          }\r\n        })\r\n        this.drawStation()\r\n      })\r\n    },\r\n    drawStation () {\r\n      const icon = L.icon({\r\n        iconUrl: require('@/assets/images/station.png'),\r\n        iconSize: [30, 30]\r\n      })\r\n      if (this.stationLayer) {\r\n        this.map.removeLayer(this.stationLayer)\r\n      }\r\n      if (this.tempStation) {\r\n        this.stationLayer = L.layerGroup().addTo(this.map)\r\n        const lat = this.tempStation.stationPosition.PositionLat\r\n        const lon = this.tempStation.stationPosition.PositionLon\r\n        L.marker([lat, lon], {\r\n          icon: icon,\r\n          title: this.tempStation.stationName,\r\n          opacity: 1.0\r\n        }).addTo(this.stationLayer)\r\n      } else {\r\n        this.stationLayer = L.layerGroup().addTo(this.map)\r\n        this.stations.forEach((station) => {\r\n          const lat = station.stationPosition.PositionLat\r\n          const lon = station.stationPosition.PositionLon\r\n          L.marker([lat, lon], {\r\n            icon: icon,\r\n            title: station.stationName,\r\n            opacity: 1.0\r\n          }).addTo(this.stationLayer)\r\n        })\r\n      }\r\n    },\r\n    getRouteData () {\r\n      if (this.tempStation) {\r\n        this.tempStation.stops.forEach((stop) => {\r\n          const routeName = stop.RouteName.Zh_tw\r\n          const city = codeToCity(stop.RouteUID.substring(0, 3))\r\n          this.axios({\r\n            method: 'get',\r\n            url: `https://ptx.transportdata.tw/MOTC/v2/Bus/Route/City/${city}/${routeName}?$format=JSON`,\r\n            headers: getAuthorizationHeader()\r\n          }).then((res) => {\r\n            const route = res.data.find(\r\n              (item) => item.RouteName.Zh_tw === routeName\r\n            )\r\n            route.CityName = cityToCityName(route.City)\r\n            this.tempBusRoutes.push(route)\r\n          })\r\n        })\r\n      }\r\n    }\r\n  },\r\n  created () {\r\n    this.emitter.emit('change-navbar-style', this.navbarStyle)\r\n  },\r\n  mounted () {\r\n    this.initialMap()\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import '~bootstrap/scss/functions';\r\n@import '../assets/style/custom/_variables.scss';\r\n@import '~bootstrap/scss/variables';\r\n@import '~bootstrap/scss/mixins';\r\n@import '~bootstrap/scss/utilities';\r\n\r\n.station {\r\n  .container-sm {\r\n    overflow: hidden;\r\n    margin-top: 110px;\r\n    @include media-breakpoint-down(md) {\r\n      margin-top: 90px;\r\n    }\r\n  }\r\n}\r\n.station-container {\r\n  overflow: hidden;\r\n  height: 500px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  box-shadow: 0px 2px 12px rgba(0, 0, 0, 0.15);\r\n  @include media-breakpoint-down(md) {\r\n    box-shadow: none;\r\n  }\r\n}\r\n.station-item,\r\n.route-item {\r\n  border: 1px solid rgba(238, 238, 238, 0.5);\r\n  box-shadow: 0px 4px 10px -1px rgba(0, 0, 0, 0.15);\r\n  border-radius: 12px;\r\n  padding: 8px 12px;\r\n  margin-bottom: 16px;\r\n  position: relative;\r\n}\r\n#map {\r\n  height: 500px;\r\n  @include media-breakpoint-down(md) {\r\n    height: calc(100vh - 100px);\r\n  }\r\n}\r\n.collapse-station-data {\r\n  background-color: #ffffff;\r\n  position: fixed;\r\n  bottom: 0;\r\n  width: 100%;\r\n  z-index: 500;\r\n  border-top-left-radius: 20px;\r\n  border-top-right-radius: 20px;\r\n  box-shadow: 0px 2px 12px rgba(0, 0, 0, 0.15);\r\n}\r\n</style>\r\n","import { render } from \"./Station.vue?vue&type=template&id=3b28ca16&scoped=true\"\nimport script from \"./Station.vue?vue&type=script&lang=js\"\nexport * from \"./Station.vue?vue&type=script&lang=js\"\n\nimport \"./Station.vue?vue&type=style&index=0&id=3b28ca16&lang=scss&scoped=true\"\n\nimport exportComponent from \"D:\\\\The F2E 3rd\\\\hello-bus\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-3b28ca16\"]])\n\nexport default __exports__","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./Station.vue?vue&type=style&index=0&id=3b28ca16&lang=scss&scoped=true\"","export const city = [\r\n  {\r\n    CityID: 'A',\r\n    CityName: '臺北市',\r\n    CityCode: 'TPE',\r\n    City: 'Taipei',\r\n    CountyID: 'A',\r\n    Version: '21.08.1'\r\n  },\r\n  {\r\n    CityID: 'B',\r\n    CityName: '臺中市',\r\n    CityCode: 'TXG',\r\n    City: 'Taichung',\r\n    CountyID: 'B',\r\n    Version: '21.08.1'\r\n  },\r\n  {\r\n    CityID: 'C',\r\n    CityName: '基隆市',\r\n    CityCode: 'KEE',\r\n    City: 'Keelung',\r\n    CountyID: 'C',\r\n    Version: '21.08.1'\r\n  },\r\n  {\r\n    CityID: 'D',\r\n    CityName: '臺南市',\r\n    CityCode: 'TNN',\r\n    City: 'Tainan',\r\n    CountyID: 'D',\r\n    Version: '21.08.1'\r\n  },\r\n  {\r\n    CityID: 'E',\r\n    CityName: '高雄市',\r\n    CityCode: 'KHH',\r\n    City: 'Kaohsiung',\r\n    CountyID: 'E',\r\n    Version: '21.08.1'\r\n  },\r\n  {\r\n    CityID: 'F',\r\n    CityName: '新北市',\r\n    CityCode: 'NWT',\r\n    City: 'NewTaipei',\r\n    CountyID: 'F',\r\n    Version: '21.08.1'\r\n  },\r\n  {\r\n    CityID: 'G',\r\n    CityName: '宜蘭縣',\r\n    CityCode: 'ILA',\r\n    City: 'YilanCounty',\r\n    CountyID: 'G',\r\n    Version: '21.08.1'\r\n  },\r\n  {\r\n    CityID: 'H',\r\n    CityName: '桃園市',\r\n    CityCode: 'TAO',\r\n    City: 'Taoyuan',\r\n    CountyID: 'H',\r\n    Version: '21.08.1'\r\n  },\r\n  {\r\n    CityID: 'I',\r\n    CityName: '嘉義市',\r\n    CityCode: 'CYI',\r\n    City: 'Chiayi',\r\n    CountyID: 'I',\r\n    Version: '21.08.1'\r\n  },\r\n  {\r\n    CityID: 'J',\r\n    CityName: '新竹縣',\r\n    CityCode: 'HSQ',\r\n    City: 'HsinchuCounty',\r\n    CountyID: 'J',\r\n    Version: '21.08.1'\r\n  },\r\n  {\r\n    CityID: 'K',\r\n    CityName: '苗栗縣',\r\n    CityCode: 'MIA',\r\n    City: 'MiaoliCounty',\r\n    CountyID: 'K',\r\n    Version: '21.08.1'\r\n  },\r\n  {\r\n    CityID: 'M',\r\n    CityName: '南投縣',\r\n    CityCode: 'NAN',\r\n    City: 'NantouCounty',\r\n    CountyID: 'M',\r\n    Version: '21.08.1'\r\n  },\r\n  {\r\n    CityID: 'N',\r\n    CityName: '彰化縣',\r\n    CityCode: 'CHA',\r\n    City: 'ChanghuaCounty',\r\n    CountyID: 'N',\r\n    Version: '21.08.1'\r\n  },\r\n  {\r\n    CityID: 'O',\r\n    CityName: '新竹市',\r\n    CityCode: 'HSZ',\r\n    City: 'Hsinchu',\r\n    CountyID: 'O',\r\n    Version: '21.08.1'\r\n  },\r\n  {\r\n    CityID: 'P',\r\n    CityName: '雲林縣',\r\n    CityCode: 'YUN',\r\n    City: 'YunlinCounty',\r\n    CountyID: 'P',\r\n    Version: '21.08.1'\r\n  },\r\n  {\r\n    CityID: 'Q',\r\n    CityName: '嘉義縣',\r\n    CityCode: 'CYQ',\r\n    City: 'ChiayiCounty',\r\n    CountyID: 'Q',\r\n    Version: '21.08.1'\r\n  },\r\n  {\r\n    CityID: 'T',\r\n    CityName: '屏東縣',\r\n    CityCode: 'PIF',\r\n    City: 'PingtungCounty',\r\n    CountyID: 'T',\r\n    Version: '21.08.1'\r\n  },\r\n  {\r\n    CityID: 'U',\r\n    CityName: '花蓮縣',\r\n    CityCode: 'HUA',\r\n    City: 'HualienCounty',\r\n    CountyID: 'U',\r\n    Version: '21.08.1'\r\n  },\r\n  {\r\n    CityID: 'V',\r\n    CityName: '臺東縣',\r\n    CityCode: 'TTT',\r\n    City: 'TaitungCounty',\r\n    CountyID: 'V',\r\n    Version: '21.08.1'\r\n  },\r\n  {\r\n    CityID: 'W',\r\n    CityName: '金門縣',\r\n    CityCode: 'KIN',\r\n    City: 'KinmenCounty',\r\n    CountyID: 'W',\r\n    Version: '21.08.1'\r\n  },\r\n  {\r\n    CityID: 'X',\r\n    CityName: '澎湖縣',\r\n    CityCode: 'PEN',\r\n    City: 'PenghuCounty',\r\n    CountyID: 'X',\r\n    Version: '21.08.1'\r\n  },\r\n  {\r\n    CityID: 'Z',\r\n    CityName: '連江縣',\r\n    CityCode: 'LIE',\r\n    City: 'LienchiangCounty',\r\n    CountyID: 'Z',\r\n    Version: '21.08.1'\r\n  }\r\n]\r\n\r\nexport function codeToCity (code) {\r\n  return city.find((city) => city.CityCode === code).City\r\n}\r\n\r\nexport function cityToCityName (item) {\r\n  return city.find((city) => city.City === item).CityName\r\n}\r\n","module.exports = __webpack_public_path__ + \"img/station.71a7c091.png\";"],"sourceRoot":""}