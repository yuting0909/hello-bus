(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fcba5e02"],{"14c5":function(t,e,a){"use strict";a.r(e);a("99af");var i=a("7a23"),n=function(t){return Object(i["v"])("data-v-3b28ca16"),t=t(),Object(i["t"])(),t},o={class:"station"},s={class:"container-sm px-0 pt-sm-5"},c={class:"row"},r={class:"col-lg-6 mt-0 px-3 d-none d-sm-block"},u={key:0,class:"station-container rounded-2 mb-sm-3"},C=n((function(){return Object(i["f"])("div",{class:"card-title mb-0 py-2 bg-primary d-none d-sm-block"},[Object(i["f"])("h1",{class:"fs-3 text-center text-white mb-0"},"附近站點")],-1)})),d={class:"card-body d-flex flex-column overflow-auto"},l={class:"fs-3 text-danger mb-1"},y=["onClick"],b={class:"fs-7 text-muted"},f={key:1,class:"station-container rounded-2 mb-sm-3"},m={class:"d-flex justify-content-between p-3"},O=n((function(){return Object(i["f"])("div",{class:"rounded-pill bg-info"},[Object(i["f"])("i",{class:"fas fas fas fa-long-arrow-alt-left"})],-1)})),p=[O],j={class:"text-end ms-3"},h={class:"fs-2 mb-1"},v={class:"fs-6 text-muted"},D={class:"card-body d-flex flex-column overflow-auto"},I={class:"row g-0"},N={class:"col-9"},g={class:"fs-3 text-danger mb-1"},S=["href"],w={class:"fs-7 text-muted"},x=n((function(){return Object(i["f"])("i",{class:"fas fa-arrows-alt-h mx-1"},null,-1)})),k={class:"col-3 text-end"},T={class:"fs-7 px-2 py-1 border rounded-pill"},V=n((function(){return Object(i["f"])("div",{class:"col-lg-6 mt-0"},[Object(i["f"])("div",{id:"map",class:"bus-station-map mb-sm-3"})],-1)})),L={class:"collapse-station-data d-sm-none"},R={key:0,class:"fas fa-caret-down"},P={key:1,class:"fas fa-caret-up"},M={id:"station-data",class:"collapse"},Z={key:0,class:"station-container"},A=n((function(){return Object(i["f"])("div",{class:"card-title mb-0 py-2 bg-primary d-none d-md-block"},[Object(i["f"])("h1",{class:"fs-3 text-center text-white mb-0"},"附近站點")],-1)})),H={class:"card-body d-flex flex-column overflow-auto"},B={class:"fs-3 text-danger mb-1"},U=["onClick"],J={class:"fs-7 text-muted"},E={key:1,class:"station-container"},_={class:"d-flex justify-content-between p-3"},G=n((function(){return Object(i["f"])("div",{class:"rounded-pill bg-info"},[Object(i["f"])("i",{class:"fas fas fas fa-long-arrow-alt-left"})],-1)})),K=[G],Q={class:"text-end ms-3"},Y={class:"fs-2 mb-1"},W={class:"fs-6 text-muted"},F={class:"card-body d-flex flex-column overflow-auto"},z={class:"row g-0"},X={class:"col-9"},$={class:"fs-3 text-danger mb-1"},q=["href"],tt={class:"fs-7 text-muted"},et=n((function(){return Object(i["f"])("i",{class:"fas fa-arrows-alt-h mx-1"},null,-1)})),at={class:"col-3 text-end"},it={class:"fs-7 px-2 py-1 border rounded-pill"};function nt(t,e,a,n,O,G){var nt=Object(i["A"])("BreadcrumbBar");return Object(i["s"])(),Object(i["e"])("div",o,[Object(i["i"])(nt,{"navbar-style":O.navbarStyle},null,8,["navbar-style"]),Object(i["f"])("div",s,[Object(i["f"])("div",c,[Object(i["f"])("div",r,[O.tempStation?Object(i["d"])("",!0):(Object(i["s"])(),Object(i["e"])("div",u,[C,Object(i["f"])("div",d,[(Object(i["s"])(!0),Object(i["e"])(i["a"],null,Object(i["y"])(O.stations,(function(t){return Object(i["s"])(),Object(i["e"])("div",{key:t.stationID,class:"station-item"},[Object(i["f"])("h2",l,[Object(i["f"])("a",{href:"#",class:"stretched-link",onClick:Object(i["J"])((function(e){return O.tempStation=t}),["prevent"])},Object(i["C"])(t.stationName),9,y)]),Object(i["f"])("span",b,Object(i["C"])(t.stationAddress),1)])})),128))])])),O.tempStation?(Object(i["s"])(),Object(i["e"])("div",f,[Object(i["f"])("div",m,[Object(i["f"])("button",{class:"btn icon-btn",onClick:e[0]||(e[0]=function(t){return O.tempStation=null})},p),Object(i["f"])("div",j,[Object(i["f"])("h1",h,Object(i["C"])(O.tempStation.stationName),1),Object(i["f"])("span",v,Object(i["C"])(O.tempStation.stationAddress),1)])]),Object(i["f"])("div",D,[(Object(i["s"])(!0),Object(i["e"])(i["a"],null,Object(i["y"])(O.tempBusRoutes,(function(t){return Object(i["s"])(),Object(i["e"])("div",{key:t.RouteUID,class:"route-item"},[Object(i["f"])("div",I,[Object(i["f"])("div",N,[Object(i["f"])("h2",g,[Object(i["f"])("a",{href:"#/driving-map/".concat(t.RouteUID,"?city=").concat(t.City,"&routeName=").concat(t.RouteName.Zh_tw),class:"stretched-link"},Object(i["C"])(t.RouteName.Zh_tw),9,S)]),Object(i["f"])("span",w,[Object(i["h"])(Object(i["C"])(t.DepartureStopNameZh),1),x,Object(i["h"])(Object(i["C"])(t.DestinationStopNameZh),1)])]),Object(i["f"])("div",k,[Object(i["f"])("span",T,Object(i["C"])(t.CityName),1)])])])})),128))])])):Object(i["d"])("",!0)]),V])]),Object(i["f"])("div",L,[Object(i["f"])("button",{class:"btn w-100",type:"button","data-bs-toggle":"collapse","data-bs-target":"#station-data","aria-expanded":"false","aria-controls":"station-data",onClick:e[1]||(e[1]=function(t){return O.collapseShow=!O.collapseShow})},[O.collapseShow?(Object(i["s"])(),Object(i["e"])("i",R)):(Object(i["s"])(),Object(i["e"])("i",P))]),Object(i["f"])("div",M,[O.tempStation?Object(i["d"])("",!0):(Object(i["s"])(),Object(i["e"])("div",Z,[A,Object(i["f"])("div",H,[(Object(i["s"])(!0),Object(i["e"])(i["a"],null,Object(i["y"])(O.stations,(function(t){return Object(i["s"])(),Object(i["e"])("div",{key:t.stationID,class:"station-item"},[Object(i["f"])("h2",B,[Object(i["f"])("a",{href:"#",class:"stretched-link",onClick:Object(i["J"])((function(e){return O.tempStation=t}),["prevent"])},Object(i["C"])(t.stationName),9,U)]),Object(i["f"])("span",J,Object(i["C"])(t.stationAddress),1)])})),128))])])),O.tempStation?(Object(i["s"])(),Object(i["e"])("div",E,[Object(i["f"])("div",_,[Object(i["f"])("button",{class:"btn icon-btn",onClick:e[2]||(e[2]=function(t){return O.tempStation=null})},K),Object(i["f"])("div",Q,[Object(i["f"])("h1",Y,Object(i["C"])(O.tempStation.stationName),1),Object(i["f"])("span",W,Object(i["C"])(O.tempStation.stationAddress),1)])]),Object(i["f"])("div",F,[(Object(i["s"])(!0),Object(i["e"])(i["a"],null,Object(i["y"])(O.tempBusRoutes,(function(t){return Object(i["s"])(),Object(i["e"])("div",{key:t.RouteUID,class:"route-item"},[Object(i["f"])("div",z,[Object(i["f"])("div",X,[Object(i["f"])("h2",$,[Object(i["f"])("a",{href:"#/driving-map/".concat(t.RouteUID,"?city=").concat(t.City,"&routeName=").concat(t.RouteName.Zh_tw),class:"stretched-link"},Object(i["C"])(t.RouteName.Zh_tw),9,q)]),Object(i["f"])("span",tt,[Object(i["h"])(Object(i["C"])(t.DepartureStopNameZh),1),et,Object(i["h"])(Object(i["C"])(t.DestinationStopNameZh),1)])]),Object(i["f"])("div",at,[Object(i["f"])("span",it,Object(i["C"])(t.CityName),1)])])])})),128))])])):Object(i["d"])("",!0)])])])}a("d81d"),a("d3b7"),a("159b"),a("7db0");var ot=a("91c2"),st=a("e11e"),ct=a.n(st),rt=a("3b94"),ut=a("6802"),Ct={components:{BreadcrumbBar:ot["a"]},data:function(){return{navbarStyle:"dark",collapseShow:!1,map:{},stations:[],tempStation:null,tempBusRoutes:[],stationLayer:{}}},inject:["emitter"],watch:{tempStation:function(){this.drawStation(),this.getRouteData()}},methods:{initialMap:function(){var t=this;this.map=ct.a.map("map",{zoomControl:!1}).setView([0,0],0),ct.a.tileLayer("https://{s}.tile.jawg.io/jawg-light/{z}/{x}/{y}{r}.png?access-token=".concat("jGpUNLDZeaC4MCep08QIRLOQ2ROGxOTxjmC3HMJCcCYsNaHD80PASTTemWTcM2ML"),{attribution:'<a href="http://jawg.io" title="Tiles Courtesy of Jawg Maps" target="_blank">&copy; <b>Jawg</b>Maps</a> &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',minZoom:0,maxZoom:22,subdomains:"abcd",accessToken:"jGpUNLDZeaC4MCep08QIRLOQ2ROGxOTxjmC3HMJCcCYsNaHD80PASTTemWTcM2ML"}).addTo(this.map),navigator.geolocation&&navigator.geolocation.getCurrentPosition((function(e){var a=e.coords.longitude,i=e.coords.latitude;t.map.setView([i,a],16),t.getNearbyStation(i,a)}),(function(t){var e=t.code,a=t.message;console.error("msg",e),console.error("dd",a)}))},getNearbyStation:function(t,e){var a=this;this.axios({method:"get",url:"https://ptx.transportdata.tw/MOTC/v2/Bus/Station/NearBy?$spatialFilter=nearby(".concat(t,",").concat(e,",300)\n&$format=JSON"),headers:Object(rt["a"])()}).then((function(t){var e=[];t.data.forEach((function(t){var a=t.StationUID.substring(0,3),i=ut["a"].map((function(t){return t.CityCode})).indexOf(a);-1!==i&&e.push(t)})),e.forEach((function(t){var e=a.stations.map((function(t){return t.stationID})).indexOf(t.StationID);-1===e?a.stations.push({stationID:t.StationID||"--",stationName:t.StationName.Zh_tw||"--",stationAddress:t.StationAddress||"--",stationPosition:t.StationPosition||{},stops:t.Stops}):a.stations[e].stops=a.stations[e].stops.concat(t.Stops)})),a.drawStation()}))},drawStation:function(){var t=this,e=ct.a.icon({iconUrl:a("82c3"),iconSize:[30,30]});if(this.stationLayer&&this.map.removeLayer(this.stationLayer),this.tempStation){this.stationLayer=ct.a.layerGroup().addTo(this.map);var i=this.tempStation.stationPosition.PositionLat,n=this.tempStation.stationPosition.PositionLon;ct.a.marker([i,n],{icon:e,title:this.tempStation.stationName,opacity:1}).addTo(this.stationLayer)}else this.stationLayer=ct.a.layerGroup().addTo(this.map),this.stations.forEach((function(a){var i=a.stationPosition.PositionLat,n=a.stationPosition.PositionLon;ct.a.marker([i,n],{icon:e,title:a.stationName,opacity:1}).addTo(t.stationLayer)}))},getRouteData:function(){var t=this;this.tempStation&&this.tempStation.stops.forEach((function(e){var a=e.RouteName.Zh_tw,i=Object(ut["c"])(e.RouteUID.substring(0,3));t.axios({method:"get",url:"https://ptx.transportdata.tw/MOTC/v2/Bus/Route/City/".concat(i,"/").concat(a,"?$format=JSON"),headers:Object(rt["a"])()}).then((function(e){var i=e.data.find((function(t){return t.RouteName.Zh_tw===a}));i.CityName=Object(ut["b"])(i.City),t.tempBusRoutes.push(i)}))}))}},created:function(){this.emitter.emit("change-navbar-style",this.navbarStyle)},mounted:function(){this.initialMap()}},dt=(a("5723"),a("6b0d")),lt=a.n(dt);const yt=lt()(Ct,[["render",nt],["__scopeId","data-v-3b28ca16"]]);e["default"]=yt},"1f9d":function(t,e,a){},5723:function(t,e,a){"use strict";a("1f9d")},6802:function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"c",(function(){return n})),a.d(e,"b",(function(){return o}));a("7db0"),a("d3b7");var i=[{CityID:"A",CityName:"臺北市",CityCode:"TPE",City:"Taipei",CountyID:"A",Version:"21.08.1"},{CityID:"B",CityName:"臺中市",CityCode:"TXG",City:"Taichung",CountyID:"B",Version:"21.08.1"},{CityID:"C",CityName:"基隆市",CityCode:"KEE",City:"Keelung",CountyID:"C",Version:"21.08.1"},{CityID:"D",CityName:"臺南市",CityCode:"TNN",City:"Tainan",CountyID:"D",Version:"21.08.1"},{CityID:"E",CityName:"高雄市",CityCode:"KHH",City:"Kaohsiung",CountyID:"E",Version:"21.08.1"},{CityID:"F",CityName:"新北市",CityCode:"NWT",City:"NewTaipei",CountyID:"F",Version:"21.08.1"},{CityID:"G",CityName:"宜蘭縣",CityCode:"ILA",City:"YilanCounty",CountyID:"G",Version:"21.08.1"},{CityID:"H",CityName:"桃園市",CityCode:"TAO",City:"Taoyuan",CountyID:"H",Version:"21.08.1"},{CityID:"I",CityName:"嘉義市",CityCode:"CYI",City:"Chiayi",CountyID:"I",Version:"21.08.1"},{CityID:"J",CityName:"新竹縣",CityCode:"HSQ",City:"HsinchuCounty",CountyID:"J",Version:"21.08.1"},{CityID:"K",CityName:"苗栗縣",CityCode:"MIA",City:"MiaoliCounty",CountyID:"K",Version:"21.08.1"},{CityID:"M",CityName:"南投縣",CityCode:"NAN",City:"NantouCounty",CountyID:"M",Version:"21.08.1"},{CityID:"N",CityName:"彰化縣",CityCode:"CHA",City:"ChanghuaCounty",CountyID:"N",Version:"21.08.1"},{CityID:"O",CityName:"新竹市",CityCode:"HSZ",City:"Hsinchu",CountyID:"O",Version:"21.08.1"},{CityID:"P",CityName:"雲林縣",CityCode:"YUN",City:"YunlinCounty",CountyID:"P",Version:"21.08.1"},{CityID:"Q",CityName:"嘉義縣",CityCode:"CYQ",City:"ChiayiCounty",CountyID:"Q",Version:"21.08.1"},{CityID:"T",CityName:"屏東縣",CityCode:"PIF",City:"PingtungCounty",CountyID:"T",Version:"21.08.1"},{CityID:"U",CityName:"花蓮縣",CityCode:"HUA",City:"HualienCounty",CountyID:"U",Version:"21.08.1"},{CityID:"V",CityName:"臺東縣",CityCode:"TTT",City:"TaitungCounty",CountyID:"V",Version:"21.08.1"},{CityID:"W",CityName:"金門縣",CityCode:"KIN",City:"KinmenCounty",CountyID:"W",Version:"21.08.1"},{CityID:"X",CityName:"澎湖縣",CityCode:"PEN",City:"PenghuCounty",CountyID:"X",Version:"21.08.1"},{CityID:"Z",CityName:"連江縣",CityCode:"LIE",City:"LienchiangCounty",CountyID:"Z",Version:"21.08.1"}];function n(t){return i.find((function(e){return e.CityCode===t})).City}function o(t){return i.find((function(e){return e.City===t})).CityName}},"82c3":function(t,e,a){t.exports=a.p+"img/station.71a7c091.png"}}]);
//# sourceMappingURL=chunk-fcba5e02.65fb6c5c.js.map